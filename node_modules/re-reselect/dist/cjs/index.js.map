{"version":3,"file":"index.js","sources":["../../src/cache/util/isStringOrNumber.js","../../src/cache/FlatObjectCache.js","../../src/createCachedSelector.js","../../src/createStructuredCachedSelector.js","../../src/cache/util/validateCacheSize.js","../../src/cache/FifoObjectCache.js","../../src/cache/LruObjectCache.js","../../src/cache/FlatMapCache.js","../../src/cache/FifoMapCache.js","../../src/cache/LruMapCache.js"],"sourcesContent":["function isStringOrNumber(value) {\n  return typeof value === 'string' || typeof value === 'number';\n}\n\nexport default isStringOrNumber;\n","import isStringOrNumber from './util/isStringOrNumber';\n\nexport default class FlatObjectCache {\n  constructor() {\n    this._cache = {};\n  }\n  set(key, selectorFn) {\n    this._cache[key] = selectorFn;\n  }\n  get(key) {\n    return this._cache[key];\n  }\n  remove(key) {\n    delete this._cache[key];\n  }\n  clear() {\n    this._cache = {};\n  }\n  isValidCacheKey(cacheKey) {\n    return isStringOrNumber(cacheKey);\n  }\n}\n","import {createSelector} from 'reselect';\nimport FlatObjectCache from './cache/FlatObjectCache';\n\nconst defaultCacheCreator = FlatObjectCache;\nconst defaultCacheKeyValidator = () => true;\n\nfunction parseReselectArgs(reselectArgs) {\n  const args = [...reselectArgs];\n  const lastArgument = args[args.length - 1];\n  let resultFunc;\n  let createSelectorOptions = undefined;\n\n  // Last argument is resultFunc\n  if (typeof lastArgument === 'function') {\n    resultFunc = args.pop();\n  } else {\n    // Last argument is createSelectorOptions object\n    createSelectorOptions = args.pop();\n    resultFunc = args.pop();\n  }\n\n  return {\n    inputSelectors: Array.isArray(args[0]) ? args[0] : [...args],\n    resultFunc,\n    createSelectorOptions,\n  };\n}\n\nfunction createCachedSelector(...reselectArgs) {\n  const {inputSelectors, resultFunc, createSelectorOptions} =\n    parseReselectArgs(reselectArgs);\n\n  return polymorphicOptions => {\n    const options =\n      typeof polymorphicOptions === 'function'\n        ? {keySelector: polymorphicOptions}\n        : Object.assign({}, polymorphicOptions);\n\n    // https://github.com/reduxjs/reselect/blob/v4.0.0/src/index.js#L54\n    let recomputations = 0;\n    const resultFuncWithRecomputations = (...args) => {\n      recomputations++;\n      return resultFunc(...args);\n    };\n\n    // Patch reselect call arguments with a custom resultFunc\n    const patchedReselectArgs = [inputSelectors, resultFuncWithRecomputations];\n    if (createSelectorOptions) {\n      patchedReselectArgs.push(createSelectorOptions);\n    }\n\n    const cache = options.cacheObject || new defaultCacheCreator();\n    const selectorCreator = options.selectorCreator || createSelector;\n    const isValidCacheKey = cache.isValidCacheKey || defaultCacheKeyValidator;\n\n    if (options.keySelectorCreator) {\n      options.keySelector = options.keySelectorCreator({\n        keySelector: options.keySelector,\n        inputSelectors,\n        resultFunc,\n      });\n    }\n\n    // User receives this function\n    const selector = function (...args) {\n      const cacheKey = options.keySelector(...args);\n\n      if (isValidCacheKey(cacheKey)) {\n        let cacheResponse = cache.get(cacheKey);\n\n        if (cacheResponse === undefined) {\n          cacheResponse = selectorCreator(...patchedReselectArgs);\n          cache.set(cacheKey, cacheResponse);\n        }\n\n        return cacheResponse(...args);\n      }\n      console.warn(\n        `[re-reselect] Invalid cache key \"${cacheKey}\" has been returned by keySelector function.`\n      );\n      return undefined;\n    };\n\n    // Further selector methods\n    selector.getMatchingSelector = (...args) => {\n      const cacheKey = options.keySelector(...args);\n      // @NOTE It might update cache hit count in LRU-like caches\n      return cache.get(cacheKey);\n    };\n\n    selector.removeMatchingSelector = (...args) => {\n      const cacheKey = options.keySelector(...args);\n      cache.remove(cacheKey);\n    };\n\n    selector.clearCache = () => {\n      cache.clear();\n    };\n\n    selector.resultFunc = resultFunc;\n\n    selector.dependencies = inputSelectors;\n\n    selector.cache = cache;\n\n    selector.recomputations = () => recomputations;\n\n    selector.resetRecomputations = () => (recomputations = 0);\n\n    selector.keySelector = options.keySelector;\n\n    return selector;\n  };\n}\n\nexport default createCachedSelector;\n","import {createStructuredSelector} from 'reselect';\nimport createCachedSelector from './createCachedSelector';\n\nfunction createStructuredCachedSelector(selectors) {\n  return createStructuredSelector(selectors, createCachedSelector);\n}\n\nexport default createStructuredCachedSelector;\n","function validateCacheSize(cacheSize) {\n  if (cacheSize === undefined) {\n    throw new Error('Missing the required property \"cacheSize\".');\n  }\n  if (!Number.isInteger(cacheSize) || cacheSize <= 0) {\n    throw new Error(\n      'The \"cacheSize\" property must be a positive integer value.'\n    );\n  }\n}\n\nexport default validateCacheSize;\n","import validateCacheSize from './util/validateCacheSize';\nimport isStringOrNumber from './util/isStringOrNumber';\n\nexport default class FifoObjectCache {\n  constructor({cacheSize} = {}) {\n    validateCacheSize(cacheSize);\n    this._cache = {};\n    this._cacheOrdering = [];\n    this._cacheSize = cacheSize;\n  }\n  set(key, selectorFn) {\n    this._cache[key] = selectorFn;\n    this._cacheOrdering.push(key);\n\n    if (this._cacheOrdering.length > this._cacheSize) {\n      const earliest = this._cacheOrdering[0];\n      this.remove(earliest);\n    }\n  }\n  get(key) {\n    return this._cache[key];\n  }\n  remove(key) {\n    const index = this._cacheOrdering.indexOf(key);\n\n    if (index > -1) {\n      this._cacheOrdering.splice(index, 1);\n    }\n    delete this._cache[key];\n  }\n  clear() {\n    this._cache = {};\n    this._cacheOrdering = [];\n  }\n  isValidCacheKey(cacheKey) {\n    return isStringOrNumber(cacheKey);\n  }\n}\n","import validateCacheSize from './util/validateCacheSize';\nimport isStringOrNumber from './util/isStringOrNumber';\n\nexport default class LruObjectCache {\n  constructor({cacheSize} = {}) {\n    validateCacheSize(cacheSize);\n    this._cache = {};\n    this._cacheOrdering = [];\n    this._cacheSize = cacheSize;\n  }\n  set(key, selectorFn) {\n    this._cache[key] = selectorFn;\n    this._registerCacheHit(key);\n\n    if (this._cacheOrdering.length > this._cacheSize) {\n      const earliest = this._cacheOrdering[0];\n      this.remove(earliest);\n    }\n  }\n  get(key) {\n    this._registerCacheHit(key);\n    return this._cache[key];\n  }\n  remove(key) {\n    this._deleteCacheHit(key);\n    delete this._cache[key];\n  }\n  clear() {\n    this._cache = {};\n    this._cacheOrdering = [];\n  }\n  _registerCacheHit(key) {\n    this._deleteCacheHit(key);\n    this._cacheOrdering.push(key);\n  }\n  _deleteCacheHit(key) {\n    const index = this._cacheOrdering.indexOf(key);\n    if (index > -1) {\n      this._cacheOrdering.splice(index, 1);\n    }\n  }\n  isValidCacheKey(cacheKey) {\n    return isStringOrNumber(cacheKey);\n  }\n}\n","export default class FlatMapCache {\n  constructor() {\n    this._cache = new Map();\n  }\n  set(key, selectorFn) {\n    this._cache.set(key, selectorFn);\n  }\n  get(key) {\n    return this._cache.get(key);\n  }\n  remove(key) {\n    this._cache.delete(key);\n  }\n  clear() {\n    this._cache.clear();\n  }\n}\n","import validateCacheSize from './util/validateCacheSize';\n\nexport default class FifoMapCache {\n  constructor({cacheSize} = {}) {\n    validateCacheSize(cacheSize);\n    this._cache = new Map();\n    this._cacheSize = cacheSize;\n  }\n  set(key, selectorFn) {\n    this._cache.set(key, selectorFn);\n\n    if (this._cache.size > this._cacheSize) {\n      const earliest = this._cache.keys().next().value;\n      this.remove(earliest);\n    }\n  }\n  get(key) {\n    return this._cache.get(key);\n  }\n  remove(key) {\n    this._cache.delete(key);\n  }\n  clear() {\n    this._cache.clear();\n  }\n}\n","import validateCacheSize from './util/validateCacheSize';\n\nexport default class LruMapCache {\n  constructor({cacheSize} = {}) {\n    validateCacheSize(cacheSize);\n    this._cache = new Map();\n    this._cacheSize = cacheSize;\n  }\n  set(key, selectorFn) {\n    this._cache.set(key, selectorFn);\n\n    if (this._cache.size > this._cacheSize) {\n      const earliest = this._cache.keys().next().value;\n      this.remove(earliest);\n    }\n  }\n  get(key) {\n    const value = this._cache.get(key);\n\n    // Register cache hit\n    if (this._cache.has(key)) {\n      this.remove(key);\n      this._cache.set(key, value);\n    }\n    return value;\n  }\n  remove(key) {\n    this._cache.delete(key);\n  }\n  clear() {\n    this._cache.clear();\n  }\n}\n"],"names":["isStringOrNumber","value","FlatObjectCache","_cache","_proto","prototype","set","key","selectorFn","get","remove","clear","isValidCacheKey","cacheKey","defaultCacheCreator","defaultCacheKeyValidator","parseReselectArgs","reselectArgs","args","concat","lastArgument","length","resultFunc","createSelectorOptions","undefined","pop","inputSelectors","Array","isArray","createCachedSelector","_len","arguments","_key","_parseReselectArgs","polymorphicOptions","options","keySelector","Object","assign","recomputations","resultFuncWithRecomputations","apply","patchedReselectArgs","push","cache","cacheObject","selectorCreator","createSelector","keySelectorCreator","selector","cacheResponse","console","warn","getMatchingSelector","removeMatchingSelector","clearCache","dependencies","resetRecomputations","createStructuredCachedSelector","selectors","createStructuredSelector","validateCacheSize","cacheSize","Error","Number","isInteger","FifoObjectCache","_temp","_ref","_cacheOrdering","_cacheSize","earliest","index","indexOf","splice","LruObjectCache","_registerCacheHit","_deleteCacheHit","FlatMapCache","Map","FifoMapCache","size","keys","next","LruMapCache","has"],"mappings":"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"}